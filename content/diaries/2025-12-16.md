---
title: 重构 Nuxt v3 项目心得
date: 2025-12-16
---

重构了一下公司的 Nuxt v3 的项目，之前的代码可以说是一点也不 Nuxt。根据 Nuxt 项目结构进行重构，舒服多了。
本来想着写很多关于设计的内容，但是归根结底，我在这个过程好像就学到了一件事就是 `看文档看文档看文档`，如果看文档不会写，那多半是没看懂。

还是记录下几个重大的改变吧：

- store 不再使用 pinia，使用 composables + vueuse + useState（Nuxt Hook） 进行存储
- 重构 nuxt.config.ts 文件，将一些内容抽离成 modules（modules会自动加载）
- 访问路由，可以在 Nuxt/server/route 中进行劫持，动态生成 robots.txt 就是这样实现
- 在 layout 中应该使用 slot 形式，不能用在 layout 中使用 nuxtpage
- Nuxt项目结构，各对应的功能都有特定的目录，一般只需要使用到特定的目录就可以完成大部分工作，如果有添加 Nuxt 没有的结构，此时考虑一下这个设计是否符合
- 我想把所有的数据操作都放在 composables 中，让page聚焦于渲染，composable聚焦于数据，因此即使调用api，我也在composable + Nuxt/server 进行完成（不知道api数据格式处理放在 Nuxt/server 中是否好，不过目前没有这样子做）

